%&program=xelatex
%&encoding=UTF-8 Unicode

\documentclass[letterpaper, 11pt]{article}

%% ODER: format ==         = "\mathrel{==}"
%% ODER: format /=         = "\neq "
%
%
\makeatletter
\@ifundefined{lhs2tex.lhs2tex.sty.read}%
  {\@namedef{lhs2tex.lhs2tex.sty.read}{}%
   \newcommand\SkipToFmtEnd{}%
   \newcommand\EndFmtInput{}%
   \long\def\SkipToFmtEnd#1\EndFmtInput{}%
  }\SkipToFmtEnd

\newcommand\ReadOnlyOnce[1]{\@ifundefined{#1}{\@namedef{#1}{}}\SkipToFmtEnd}
\usepackage{amstext}
\usepackage{amssymb}
\usepackage{stmaryrd}
\DeclareFontFamily{OT1}{cmtex}{}
\DeclareFontShape{OT1}{cmtex}{m}{n}
  {<5><6><7><8>cmtex8
   <9>cmtex9
   <10><10.95><12><14.4><17.28><20.74><24.88>cmtex10}{}
\DeclareFontShape{OT1}{cmtex}{m}{it}
  {<-> ssub * cmtt/m/it}{}
\newcommand{\texfamily}{\fontfamily{cmtex}\selectfont}
\DeclareFontShape{OT1}{cmtt}{bx}{n}
  {<5><6><7><8>cmtt8
   <9>cmbtt9
   <10><10.95><12><14.4><17.28><20.74><24.88>cmbtt10}{}
\DeclareFontShape{OT1}{cmtex}{bx}{n}
  {<-> ssub * cmtt/bx/n}{}
\newcommand{\tex}[1]{\text{\texfamily#1}}	% NEU

\newcommand{\Sp}{\hskip.33334em\relax}


\newcommand{\Conid}[1]{\mathit{#1}}
\newcommand{\Varid}[1]{\mathit{#1}}
\newcommand{\anonymous}{\kern0.06em \vbox{\hrule\@width.5em}}
\newcommand{\plus}{\mathbin{+\!\!\!+}}
\newcommand{\bind}{\mathbin{>\!\!\!>\mkern-6.7mu=}}
\newcommand{\rbind}{\mathbin{=\mkern-6.7mu<\!\!\!<}}% suggested by Neil Mitchell
\newcommand{\sequ}{\mathbin{>\!\!\!>}}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}
\usepackage{polytable}

%mathindent has to be defined
\@ifundefined{mathindent}%
  {\newdimen\mathindent\mathindent\leftmargini}%
  {}%

\def\resethooks{%
  \global\let\SaveRestoreHook\empty
  \global\let\ColumnHook\empty}
\newcommand*{\savecolumns}[1][default]%
  {\g@addto@macro\SaveRestoreHook{\savecolumns[#1]}}
\newcommand*{\restorecolumns}[1][default]%
  {\g@addto@macro\SaveRestoreHook{\restorecolumns[#1]}}
\newcommand*{\aligncolumn}[2]%
  {\g@addto@macro\ColumnHook{\column{#1}{#2}}}

\resethooks

\newcommand{\onelinecommentchars}{\quad-{}- }
\newcommand{\commentbeginchars}{\enskip\{-}
\newcommand{\commentendchars}{-\}\enskip}

\newcommand{\visiblecomments}{%
  \let\onelinecomment=\onelinecommentchars
  \let\commentbegin=\commentbeginchars
  \let\commentend=\commentendchars}

\newcommand{\invisiblecomments}{%
  \let\onelinecomment=\empty
  \let\commentbegin=\empty
  \let\commentend=\empty}

\visiblecomments

\newlength{\blanklineskip}
\setlength{\blanklineskip}{0.66084ex}

\newcommand{\hsindent}[1]{\quad}% default is fixed indentation
\let\hspre\empty
\let\hspost\empty
\newcommand{\NB}{\textbf{NB}}
\newcommand{\Todo}[1]{$\langle$\textbf{To do:}~#1$\rangle$}

\EndFmtInput
\makeatother
%
%
%
%
%
%
% This package provides two environments suitable to take the place
% of hscode, called "plainhscode" and "arrayhscode". 
%
% The plain environment surrounds each code block by vertical space,
% and it uses \abovedisplayskip and \belowdisplayskip to get spacing
% similar to formulas. Note that if these dimensions are changed,
% the spacing around displayed math formulas changes as well.
% All code is indented using \leftskip.
%
% Changed 19.08.2004 to reflect changes in colorcode. Should work with
% CodeGroup.sty.
%
\ReadOnlyOnce{polycode.fmt}%
\makeatletter

\newcommand{\hsnewpar}[1]%
  {{\parskip=0pt\parindent=0pt\par\vskip #1\noindent}}

% can be used, for instance, to redefine the code size, by setting the
% command to \small or something alike
\newcommand{\hscodestyle}{}

% The command \sethscode can be used to switch the code formatting
% behaviour by mapping the hscode environment in the subst directive
% to a new LaTeX environment.

\newcommand{\sethscode}[1]%
  {\expandafter\let\expandafter\hscode\csname #1\endcsname
   \expandafter\let\expandafter\endhscode\csname end#1\endcsname}

% "compatibility" mode restores the non-polycode.fmt layout.

\newenvironment{compathscode}%
  {\par\noindent
   \advance\leftskip\mathindent
   \hscodestyle
   \let\\=\@normalcr
   \let\hspre\(\let\hspost\)%
   \pboxed}%
  {\endpboxed\)%
   \par\noindent
   \ignorespacesafterend}

\newcommand{\compaths}{\sethscode{compathscode}}

% "plain" mode is the proposed default.
% It should now work with \centering.
% This required some changes. The old version
% is still available for reference as oldplainhscode.

\newenvironment{plainhscode}%
  {\hsnewpar\abovedisplayskip
   \advance\leftskip\mathindent
   \hscodestyle
   \let\hspre\(\let\hspost\)%
   \pboxed}%
  {\endpboxed%
   \hsnewpar\belowdisplayskip
   \ignorespacesafterend}

\newenvironment{oldplainhscode}%
  {\hsnewpar\abovedisplayskip
   \advance\leftskip\mathindent
   \hscodestyle
   \let\\=\@normalcr
   \(\pboxed}%
  {\endpboxed\)%
   \hsnewpar\belowdisplayskip
   \ignorespacesafterend}

% Here, we make plainhscode the default environment.

\newcommand{\plainhs}{\sethscode{plainhscode}}
\newcommand{\oldplainhs}{\sethscode{oldplainhscode}}
\plainhs

% The arrayhscode is like plain, but makes use of polytable's
% parray environment which disallows page breaks in code blocks.

\newenvironment{arrayhscode}%
  {\hsnewpar\abovedisplayskip
   \advance\leftskip\mathindent
   \hscodestyle
   \let\\=\@normalcr
   \(\parray}%
  {\endparray\)%
   \hsnewpar\belowdisplayskip
   \ignorespacesafterend}

\newcommand{\arrayhs}{\sethscode{arrayhscode}}

% The mathhscode environment also makes use of polytable's parray 
% environment. It is supposed to be used only inside math mode 
% (I used it to typeset the type rules in my thesis).

\newenvironment{mathhscode}%
  {\parray}{\endparray}

\newcommand{\mathhs}{\sethscode{mathhscode}}

% texths is similar to mathhs, but works in text mode.

\newenvironment{texthscode}%
  {\(\parray}{\endparray\)}

\newcommand{\texths}{\sethscode{texthscode}}

% The framed environment places code in a framed box.

\def\codeframewidth{\arrayrulewidth}
\RequirePackage{calc}

\newenvironment{framedhscode}%
  {\parskip=\abovedisplayskip\par\noindent
   \hscodestyle
   \arrayrulewidth=\codeframewidth
   \tabular{@{}|p{\linewidth-2\arraycolsep-2\arrayrulewidth-2pt}|@{}}%
   \hline\framedhslinecorrect\\{-1.5ex}%
   \let\endoflinesave=\\
   \let\\=\@normalcr
   \(\pboxed}%
  {\endpboxed\)%
   \framedhslinecorrect\endoflinesave{.5ex}\hline
   \endtabular
   \parskip=\belowdisplayskip\par\noindent
   \ignorespacesafterend}

\newcommand{\framedhslinecorrect}[2]%
  {#1[#2]}

\newcommand{\framedhs}{\sethscode{framedhscode}}

% The inlinehscode environment is an experimental environment
% that can be used to typeset displayed code inline.

\newenvironment{inlinehscode}%
  {\(\def\column##1##2{}%
   \let\>\undefined\let\<\undefined\let\\\undefined
   \newcommand\>[1][]{}\newcommand\<[1][]{}\newcommand\\[1][]{}%
   \def\fromto##1##2##3{##3}%
   \def\nextline{}}{\) }%

\newcommand{\inlinehs}{\sethscode{inlinehscode}}

% The joincode environment is a separate environment that
% can be used to surround and thereby connect multiple code
% blocks.

\newenvironment{joincode}%
  {\let\orighscode=\hscode
   \let\origendhscode=\endhscode
   \def\endhscode{\def\hscode{\endgroup\def\@currenvir{hscode}\\}\begingroup}
   %\let\SaveRestoreHook=\empty
   %\let\ColumnHook=\empty
   %\let\resethooks=\empty
   \orighscode\def\hscode{\endgroup\def\@currenvir{hscode}}}%
  {\origendhscode
   \global\let\hscode=\orighscode
   \global\let\endhscode=\origendhscode}%

\makeatother
\EndFmtInput
%
%


\usepackage{xcolor}

% Char literal
\colorlet{Char}{darkgray}

% Numeral literal
\colorlet{Numeral}{Char}

% Keyword
\colorlet{Keyword}{red!50!black}

% Module identifier
\colorlet{ModId}{Char}

% Variable identifier and symbol
\colorlet{VarId}{Char}
\colorlet{VarSym}{VarId}

% Data constructor identifier and symbol
\colorlet{ConId}{VarId}
\colorlet{ConSym}{ConId}

% Type variable identifier
\colorlet{TVarId}{gray}

% Type constructor identifier
\colorlet{TConId}{TVarId}
\colorlet{TConSym}{TConId}

% Type class identifier
\colorlet{TClassId}{TVarId}

% Comment
\colorlet{Comment}{blue!45!black}

\newcommand\Char[1]{\textcolor{Char}{\texttt{#1}}}

% Numeral literal
\newcommand\Numeral[1]{\textcolor{Numeral}{\mathsf{#1}}}

% Keyword
\newcommand\Keyword[1]{\textcolor{Keyword}{\textbf{\textsf{#1}}}}

% Module identifier
\newcommand\ModId[1]{\mathord{\textcolor{ModId}{\mathsf{#1}}}}

% Variable identifier and symbol
\newcommand\VarId[1]{\mathord{\textcolor{VarId}{#1}}}
\let\Varid\VarId
\newcommand\VarSym[1]{\mathbin{\textcolor{VarSym}{#1}}}

% Data constructor identifier and symbol
\newcommand\ConId[1]{\mathord{\textcolor{ConId}{\mathsf{#1}}}}
\let\Conid\ConId
\newcommand\ConSym[1]{\mathbin{\textcolor{ConSym}{\mathsf{#1}}}}

% Type variable identifier
\newcommand\TVarId[1]{\mathord{\textcolor{TVarId}{\mathsf{#1}}}}

% Type constructor identifier
\newcommand\TConId[1]{\mathord{\textcolor{TConId}{\mathsf{#1}}}}
% \newcommand\TConSym[1]{\mathbin{#1}}
\newcommand\TConSym[1]{\mathbin{\textcolor{TConSym}{\mathsf{#1}}}}

% Type class identifier
\newcommand\TClassId[1]{\mathord{\textcolor{TClassId}{\textit{\textsf{#1}}}}}

% Comment
\newcommand\Comment[1]{\textcolor{Comment}{\textit{\textsf{#1}}}}

% Package identifier (used in text, not code/math environment)
\newcommand\PkgId[1]{\textcolor{Char}{\texttt{#1}}}




% Comments: one-line, nested, pragmas



\DeclareMathAlphabet{\mathkw}{OT1}{cmss}{bx}{n}

\newcommand{\FN}{\mathsf}
\newcommand{\comment}[1]{\marginpar{#1}}
\newcommand{\ignore}[1]{}


















\usepackage{setspace,stmaryrd,url,subfigure, amssymb, amsfonts,amsmath,multicol,booktabs}
\usepackage[font=small, margin=2cm]{caption}
\usepackage{xytree, listings, cgloss4e, qtree}
\usepackage[toc,page]{appendix}
\usepackage[round]{natbib}

\usepackage{anysize}
\usepackage[margin=1.25in]{geometry}

\usepackage[silent]{fontspec}
\usepackage{xltxtra}
\usepackage{polyglossia}

\newICUfeature{Contextual}{on}{+calt}

\defaultfontfeatures{Mapping=tex-text}
\newcommand{\salt}[1]{{\addfontfeature{Style=Alternate}{#1}}}
\newcommand{\hlig}[1]{{\addfontfeature{Ligatures=Historical}{#1}}}

\newfontfamily\greekfont[Script=Greek, Scale=MatchUppercase, Contextual=on]{Junicode}
\setotherlanguage{greek}
\setmainfont{Adobe Text Pro}

\let\eachwordone=\textgreek

\def\gkbarnode#1{\xybarnode{\textgreek{#1}}}

\definecolor{gray}{rgb}{0.4,0.4,0.4}

\lstset{
  basicstyle=\ttfamily,
  columns=fullflexible,
  showstringspaces=false,
  commentstyle=\color{gray}\upshape
}

\lstdefinelanguage{XML}
{
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{gray},
  identifierstyle=\color{black},
  keywordstyle=\color{black},
  morekeywords={xmlns,version,type}% list your attributes here
}


\begin{document}
\onehalfspacing

\author{Jonathan Sterling}

\title{A Survey of Phrase Projectivity in the \emph{Antigone}}
\date{April 2013}
\maketitle

\abstract{In this paper, I demonstrate how, and to what degree, phrase
projectivity corresponds with register and meter in Sophocles's \emph{Antigone},
by developing a quantitative metric for projectivity and comparing it across
lyrics, trimeters and anapaests using the data provided by the Perseus Ancient
Greek Dependency Treebank \citep{perseustreebanks2011}. In the appendices, the
formal algorithm for the computations done herein is developed in the
programming language Haskell \citep{haskell2010}.}



\section{Dependency Trees and Their Projectivity}

A dependency tree encodes the head-dependent relation for a string of words,
where arcs are drawn from heads to their dependents. We consider a phrase
\emph{projective} when these arcs do not cross each other, and
\emph{discontinuous} to the extent that any of the arcs intersect.
Figure~\ref{fig:dependency-trees1} is a minimal pair that demonstrates how
hyperbaton introduces a projectivity violation; in this case, a path of
dependency ``wraps around itself''.

\begin{figure}[h!]
\centering
\subfigure[``Full of plentiful supplies'' (Xenophon, \emph{Anabasis} 3.5.1) is fully projective.]{
  \xytext{
    \gkbarnode{μεστῇ}\xybarconnect[6](U,U){2}&
    \gkbarnode{πο\hlig{λλ}ῶν}&
    \gkbarnode{ἀγα\salt{θ}ῶν}\xybarconnect[3](UL,U){-1}
  }
}
\hspace{6pt}
\subfigure[``Full of many good things'' (Plato, \emph{Laws} 906a) has one
projectivity violation.]{
  \xytext{
    \gkbarnode{πο\hlig{λλ}ῶν}&
    \gkbarnode{μεστὸν}\xybarconnect[6]{1}&
    \gkbarnode{ἀγα\salt{θ}ῶν}\xybarconnect[3](UL,U){-2}
  }
}

\caption{Examples drawn from \citet[p.\ 11]{devine2000discontinuous}.}
\label{fig:dependency-trees1}
\end{figure}

In addition to the above, adjacent phrases (that is, phrases at the same level
in the tree) may interlace, causing projectivity violations. This is commonly
introduced by Wackernagel's Law, as in Figure~\ref{fig:wackernagel}, where the
placement of \textgreek{μὲν δὴ} interlaces with the \textgreek{τὰ...πόλεος} phrase.

\begin{figure}[h!]
\centering
\xytext{
    \gkbarnode{τὰ}\xybarconnect[6]{3}&
    \gkbarnode{μὲν}\xybarconnect[3](UR,U){1}&
    \gkbarnode{δὴ}&
    \gkbarnode{πόλεος}&
    \gkbarnode{...}&
    \gkbarnode{ὤρ\salt{θ}ησαν}\xybarconnect[9](U,UL){-5}\xybarconnect[9]{-4}
}
\caption{``[The gods] righted the matters of the city...'' (\emph{Antigone},
ll.\ 162--163) has
one projectivity violation, due to the \textgreek{μὲν δὴ} falling in Wackernagel's Position.}
\label{fig:wackernagel}
\end{figure}

We consider a violation to have occured for each and every intersection of lines
on such a drawing; thus, the hyperbaton of one word may introduce multiple
violations. Consider, for instance, Figure~\ref{fig:stas-tree}, in which five
violations are brought about by the displacement of \textgreek{φονώσαισιν}. In
this way, the number of intersections is a good heuristic for judging the
severity of hyperbata.

\begin{figure}[h!]
\centering
\xytext{
  \gkbarnode{στὰς}\xybarconnect[6]{2} &
  \gkbarnode{δ'} &
  \gkbarnode{ὑπὲρ}\xybarconnect[3](UR,U){1} &
  \gkbarnode{μελά\salt{θ}ρων} &
  \gkbarnode{φονώσαισιν} &
  \gkbarnode{ἀμφι}
    \xybarconnect[6](UR,U){3} &
  \gkbarnode{\!\!\!χανὼν}
    \xybarconnect[6](U,U){1}
    \xybarconnect[6](UL,U){4}&
  \gkbarnode{κύκλῳ} &
  \gkbarnode{λόγχαις}\xybarconnect[3](UL,U){-4} &
  \gkbarnode{ἑπτάπυλον} &
  \gkbarnode{στόμα}\xybarconnect[3](UL,U){-1} &
  \gkbarnode{ἔβα}
    \xybarconnect[9](U,UL){-11}
    \xybarconnect[9](U,U){-10}
    \xybarconnect[9](U,U){-6}
}
\caption{``And he stood over the rooftops, gaped in a circle with murderous
spears around the seven-gated mouth, and left'' (\emph{Antigone}, ll.\ 117--120) has
six projectivity violations, five of which are induced by the hyperbaton of
\textgreek{φονώσαισιν}, and one from the usual placement of \textgreek{δ'} in Wackernagel's
Position.}
\label{fig:stas-tree}
\end{figure}

\subsection{Counting Violations}

Drawing trees and counting intersections is time-consuming and error-prone,
especially since the number of intersections may vary if one is not consistent
with the relative height of arcs and placement of endpoints. It is clear, then,
that a computer ought to be able to do the job faster and more accurately than a
human, given at least the head-dependent relations for a corpus.

The formal algorithm for counting the number of intersections is given in
Appendix~\ref{sec:counting}, but I shall reproduce an informal and mostly
nontechnical version of it here. First, we index each word in the sentence by
its linear position, and cross-reference it with the linear position of its
head:

\begin{quote}
\gll στὰς δ' ὑπὲρ μελά\salt{θ}ρων φονώσαισιν ἀμφικανὼν κύκλῳ λόγχαις ἑπτάπυλον στόμα
ἔβα\\
      1:11  2:11 3:1 4:3 5:8 6:11 7:6 8:6 9:10 10:6 11:\_\\
\end{quote}

\noindent
%
Next, arrange the dependencies into a tree as in Figure~\ref{fig:rose-tree}.
Then, counting upwards from the lowest edges (i.e.\ the lines) in the tree up to
the topmost ones, make a list of edges indexed by vertical level as in
Table~\ref{tab:edges}.

\begin{figure}[h]
  \Tree
  [.11
    [.1 [.3 4 ] ]
    2
    [.6
      7
      [.8 5 ]
      [.10 9 ]
    ]
  ]
\caption{The dependency relations arranged in a non-linear tree.}
\label{fig:rose-tree}
\end{figure}

\begin{table}[h]
\centering
  \begin{tabular}{cl}
  \toprule
  \textsc{level} & \textsc{edges}\\
  \midrule
  1 & \ensuremath{\Numeral{3}\leftrightarrow\Numeral{4},\Numeral{5}\leftrightarrow\Numeral{8},\Numeral{9}\leftrightarrow\Numeral{10}}\\
  2 & \ensuremath{\Numeral{1}\leftrightarrow\Numeral{3},\Numeral{6}\leftrightarrow\Numeral{7},\Numeral{6}\leftrightarrow\Numeral{8},\Numeral{6}\leftrightarrow\Numeral{10}}\\
  3 & \ensuremath{\Numeral{1}\leftrightarrow\Numeral{11},\Numeral{2}\leftrightarrow\Numeral{11},\Numeral{6}\leftrightarrow\Numeral{11}}
  \\
  \bottomrule
  \end{tabular}
  \caption{Edges of the tree in Figure~\ref{fig:rose-tree} arranged by level.}
  \label{tab:edges}
\end{table}

Then, each edge in our table must be checked for violations against all the
other edges in the table except those which are in a level higher than it. The
level of the edge corresponds with the height at which we drew the arcs; this
condition arises out of the fact that an arc cannot cross an arc that is above
it.

Next, we must figure out all the possible ways for an arc to intersect another
at given levels. These are enumerated in detail in the function \ensuremath{\FN{checkEdges}} in
Appendix~\ref{sec:counting}, but suffice it to say that they fall into a few
main categories:

\begin{enumerate}
\item Both vertices of the higher edge are within the bounds of the lower edge.
This is a double violation, as both sides of an arc will extrude through
another.
\item One vertex of the higher edge is within the bounds of the lower edge, and
the other vertex is not; this vertex is allowed to be equal to the second vertex
of the lower edge. In either case, this is a single violation, as just one
intersection occurs.
\item The edges are at the same level, and one vertex of the higher edge is
neither within bounds of the other, nor equal to any of the vertices of the
other. This is a single violation.
\end{enumerate}

\noindent
Using this procedure, we shall have found the edge violations which are listed
in Table~\ref{tab:violations}, which are \ensuremath{\Numeral{6}} in total.

\begin{table}
\centering
\begin{tabular}{ccc}
\toprule
\ensuremath{\Numeral{2}\leftrightarrow\Numeral{11}} & \ensuremath{\Numeral{1}\leftrightarrow\Numeral{3}} & 1\\
\ensuremath{\Numeral{6}\leftrightarrow\Numeral{11}} & \ensuremath{\Numeral{5}\leftrightarrow\Numeral{8}} & 1\\
\ensuremath{\Numeral{6}\leftrightarrow\Numeral{7}}  & \ensuremath{\Numeral{5}\leftrightarrow\Numeral{8}} & 2\\
\ensuremath{\Numeral{6}\leftrightarrow\Numeral{8}}  & \ensuremath{\Numeral{5}\leftrightarrow\Numeral{8}} & 1\\
\ensuremath{\Numeral{6}\leftrightarrow\Numeral{10}} & \ensuremath{\Numeral{5}\leftrightarrow\Numeral{8}}  & 1\\
\midrule
\multicolumn{3}{r}{$\FN{total}$ \ensuremath{\mathrel{=}\Numeral{6}}}\\
\bottomrule
\end{tabular}
\caption{Projectivity violations which arise from the edges in
Table~\ref{tab:edges}.}
\label{tab:violations}
\end{table}

\subsection{\ensuremath{\FN{\wp}}: a metric of projectivity}

In order for our view of a text's overall projectivity to not be skewed by its
length, we must have a ratio. For the purposes of this paper, we shall call this
metric \ensuremath{\FN{\wp}}, as given by the following ratio:
%
\[ \wp = \frac{\text{number of violations}}{\text{number of arcs}} \]
%
Now, this metric applies just as much to a single sentence as it does to a
larger body of text. So, averages of \ensuremath{\FN{\wp}} should not be taken; rather, total
numbers of violations and total numbers of arcs should be accumulated until
\ensuremath{\FN{\wp}} may be computed for the entire body of text being examined.

\section{The Perseus Treebank}
%
The Perseus Ancient Greek Dependency Treebank is a massive trove of annotated
texts that encode all the dependency relations in every sentence. The data is
given in an XML (E\textbf{x}tensible \textbf{M}arkup \textbf{L}anguage) format
resembling the following:

\lstset{
  language=XML,
  escapeinside=**
}

\begin{lstlisting}
    <sentence id="2900759">
      <word id="1" form="*\color{gray}\textrm{\textgreek{\hlig{χρὴ}}}*" lemma="*\color{gray}\textrm{\textgreek{\hlig{χρή}}}*" head="0" />
      <word id="2" form="*\color{gray}\textrm{\textgreek{δὲ}}*" lemma="*\color{gray}\textrm{\textgreek{δέ}}*" head="1" />
      ...
    </sentence>
\end{lstlisting}

\noindent
%
Every sentence is given a unique, sequential identifier; within each sentence,
every word is indexed by its linear position and coindexed with the linear
position of its superordinate head. Hence, the treebanks are an invaluable
source for a scholar who wishes to confirm intuitions about hyperbaton-frequency
with real data on a large scale.

Indeed, it is not a new proposition to analyze the Perseus Treebanks for
hyperbata; for instance, \citet{bamman2006design} report an experiment run
against the Latin Treebank to compare the level of hyperbaton across Jerome,
Caesar, Cicero and Vergil. \citeauthor{bamman2006design}'s design, however, is
both more limited and more fine-grained than the one presented in this paper: on
the one hand, they exclusively observe hyperbata that involve a dependent being
transposed out from under a preposition (and ignore the syntactically parallel
account for other categories); on the other hand, they distinguish between two
different such cases, namely those of \emph{memorem ob īram} and \emph{īram ob
memorem}, which are respectively the Y$_2$ and Y$_1$ hyperbata of
\citeauthor{devine2000discontinuous}.


\section{Projectivity in the \emph{Antigone}}

To observe the variation of projectivity within a text, then, one may make a
selection of sentences that have something in common, compute their trees and
thence derive a cumulative \ensuremath{\FN{\wp}} for the entire selection. Then that figure
may be compared with that of other selections.

I have chosen to compare projectivity in lyrics, anapaests and trimeters. Lyrics
I have divided into two categories: choral odes and laments, whereas I divide
trimeters into medium-to-long speeches and stichomythia.
Appendix~\ref{sec:parsing} deals with parsing the Perseus XML representations of
the \emph{Antigone} into dependency trees for which we can compute \ensuremath{\FN{\wp}}.

To that end, I have selected passages from the \emph{Antigone} and organized
them by type. Table~\ref{tab:lyrics} enumerates the lyric passages of the play,
along with their computed \ensuremath{\FN{\wp}} values, and a cumulative \ensuremath{\FN{\wp}} value for the
entire set. Table~\ref{tab:anapaests} does the same for anapaests. Lastly,
Table~\ref{tab:dialogue} gives selections of dialogue (which is in iambic
trimeters), divided between medium-to-long speeches and stichomythia.

\begin{table}
  \centering
  \subtable[Choral Odes]{
\begin{tabular}{clc}\toprule\textsc{lines}&\textsc{}&\ensuremath{\FN{\wp}}\\ \midrule\ensuremath{\Numeral{100}\cdots\Numeral{154}}&\emph{First choral ode}&\ensuremath{\Numeral{0.83}}\\\ensuremath{\Numeral{332}\cdots\Numeral{375}}&\emph{Second choral ode}&\ensuremath{\Numeral{0.58}}\\\ensuremath{\Numeral{583}\cdots\Numeral{625}}&\emph{Third choral ode}&\ensuremath{\Numeral{0.71}}\\\ensuremath{\Numeral{781}\cdots\Numeral{800}}&\emph{Fourth choral ode}&\ensuremath{\Numeral{0.67}}\\\ensuremath{\Numeral{944}\cdots\Numeral{987}}&\emph{Fifth choral ode}&\ensuremath{\Numeral{0.47}}\\\ensuremath{\Numeral{1116}\cdots\Numeral{1152}}&\emph{Sixth choral ode}&\ensuremath{\Numeral{0.64}}\\\midrule\multicolumn{3}{r}{\ensuremath{\FN{cumulative}\;\FN{\wp}} = \ensuremath{\Numeral{0.66}}}\\\bottomrule\end{tabular}
}
  \vspace{6pt}
  \subtable[Laments]{
\begin{tabular}{clc}\toprule\textsc{lines}&\textsc{}&\ensuremath{\FN{\wp}}\\ \midrule\ensuremath{\Numeral{806}\cdots\Numeral{816}}&\emph{Antigone's Lament}&\ensuremath{\Numeral{1.37}}\\\ensuremath{\Numeral{823}\cdots\Numeral{833}}&\emph{Antigone's Lament (cntd.)}&\ensuremath{\Numeral{0.78}}\\\ensuremath{\Numeral{839}\cdots\Numeral{882}}&\emph{Antigone's Lament (cntd.)}&\ensuremath{\Numeral{0.63}}\\\ensuremath{\Numeral{1261}\cdots\Numeral{1269}}&\emph{Kreon's Lament}&\ensuremath{\Numeral{0.38}}\\\ensuremath{\Numeral{1283}\cdots\Numeral{1292}}&\emph{Kreon's Lament (cntd.)}&\ensuremath{\Numeral{1.34}}\\\ensuremath{\Numeral{1306}\cdots\Numeral{1311}}&\emph{Kreon's Lament (cntd.)}&\ensuremath{\Numeral{0.37}}\\\ensuremath{\Numeral{1317}\cdots\Numeral{1325}}&\emph{Kreon's Lament (cntd.)}&\ensuremath{\Numeral{1.13}}\\\ensuremath{\Numeral{1239}\cdots\Numeral{1246}}&\emph{Kreon's Lament (cntd.)}&\ensuremath{\Numeral{0.60}}\\\midrule\multicolumn{3}{r}{\ensuremath{\FN{cumulative}\;\FN{\wp}} = \ensuremath{\Numeral{0.78}}}\\\bottomrule\end{tabular}
}
  \caption{Lyrics}
  \label{tab:lyrics}
\end{table}

\begin{table}
  \centering
  
\begin{tabular}{clc}\toprule\textsc{lines}&\textsc{}&\ensuremath{\FN{\wp}}\\ \midrule\ensuremath{\Numeral{155}\cdots\Numeral{161}}&\emph{Kreon's Entrance}&\ensuremath{\Numeral{0.33}}\\\ensuremath{\Numeral{376}\cdots\Numeral{383}}&\emph{Antigone's Entrance}&\ensuremath{\Numeral{0.91}}\\\ensuremath{\Numeral{526}\cdots\Numeral{530}}&\emph{Ismene's Entrance}&\ensuremath{\Numeral{0.05}}\\\ensuremath{\Numeral{626}\cdots\Numeral{630}}&\emph{Haimon's Entrance}&\ensuremath{\Numeral{0.91}}\\\ensuremath{\Numeral{801}\cdots\Numeral{805}}&\emph{Antigone's Entrance}&\ensuremath{\Numeral{1.16}}\\\ensuremath{\Numeral{817}\cdots\Numeral{822}}&\emph{Chorus to Antigone}&\ensuremath{\Numeral{0.57}}\\\ensuremath{\Numeral{834}\cdots\Numeral{838}}&\emph{Chorus to Antigone}&\ensuremath{\Numeral{0.05}}\\\ensuremath{\Numeral{929}\cdots\Numeral{943}}&\emph{Chorus, Kreon and Antigone}&\ensuremath{\Numeral{0.25}}\\\ensuremath{\Numeral{1257}\cdots\Numeral{1260}}&\emph{Chorus before Kreon's Kommos}&\ensuremath{\Numeral{0.00}}\\\ensuremath{\Numeral{1347}\cdots\Numeral{1353}}&\emph{Final anapaests of the Chorus}&\ensuremath{\Numeral{0.31}}\\\midrule\multicolumn{3}{r}{\ensuremath{\FN{cumulative}\;\FN{\wp}} = \ensuremath{\Numeral{0.47}}}\\\bottomrule\end{tabular}

  \caption{Anapaests.}
  \label{tab:anapaests}
\end{table}

\begin{table}
  \centering
  \subfigure[Speeches and Dialogue]{
\begin{tabular}{clc}\toprule\textsc{lines}&\textsc{}&\ensuremath{\FN{\wp}}\\ \midrule\ensuremath{\Numeral{162}\cdots\Numeral{210}}&\emph{\emph{Kreon: \textgreek{ἄνδρες, τὰ μὲν δὴ...}}}&\ensuremath{\Numeral{0.40}}\\\ensuremath{\Numeral{249}\cdots\Numeral{277}}&\emph{\emph{Guard: \textgreek{οὐκ οἶδ'· ἐκ\hlig{εῖ} γὰρ οὔτε...}}}&\ensuremath{\Numeral{0.57}}\\\ensuremath{\Numeral{280}\cdots\Numeral{314}}&\emph{\emph{Kreon: \textgreek{παῦσαι, πρὶν ὀργῆς...}}}&\ensuremath{\Numeral{0.45}}\\\ensuremath{\Numeral{407}\cdots\Numeral{440}}&\emph{\emph{Guard: \textgreek{τοιοῦτον ἦν τὸ πρᾶγμ'...}}}&\ensuremath{\Numeral{0.56}}\\\ensuremath{\Numeral{450}\cdots\Numeral{470}}&\emph{\emph{Antigone: \textgreek{οὐ γάρ τί μοι Ζεὺς...}}}&\ensuremath{\Numeral{0.56}}\\\ensuremath{\Numeral{473}\cdots\Numeral{495}}&\emph{\emph{Kreon: \textgreek{ἀ\hlig{λλ}' ἴσ\salt{θ}ι τοι...}}}&\ensuremath{\Numeral{0.45}}\\\ensuremath{\Numeral{639}\cdots\Numeral{680}}&\emph{\emph{Kreon: \textgreek{οὕτω γὰρ, ὦ παῖ...}}}&\ensuremath{\Numeral{0.55}}\\\ensuremath{\Numeral{683}\cdots\Numeral{723}}&\emph{\emph{Haimon: \textgreek{πἀτερ, \salt{θ}εοὶ φύουσιν...}}}&\ensuremath{\Numeral{0.45}}\\\ensuremath{\Numeral{891}\cdots\Numeral{928}}&\emph{\emph{Antigone: \textgreek{ὦ τύμβος, ὦ νυμφ\hlig{εῖ}ον...}}}&\ensuremath{\Numeral{0.48}}\\\ensuremath{\Numeral{998}\cdots\Numeral{1032}}&\emph{\emph{Teiresias: \textgreek{γνώσῃ, τέχνης σημ\hlig{εῖ}α...}}}&\ensuremath{\Numeral{0.57}}\\\ensuremath{\Numeral{1033}\cdots\Numeral{1047}}&\emph{\emph{Kreon: \textgreek{ὦ πρέσβυ, πάντες...}}}&\ensuremath{\Numeral{0.24}}\\\ensuremath{\Numeral{1064}\cdots\Numeral{1090}}&\emph{\emph{Teiresias: \textgreek{ἀ\hlig{λλ'} εὖ γέ τοι...}}}&\ensuremath{\Numeral{0.82}}\\\ensuremath{\Numeral{1155}\cdots\Numeral{1172}}&\emph{\emph{Messenger: \textgreek{Κάδμου πάροικοι καὶ...}}}&\ensuremath{\Numeral{0.51}}\\\ensuremath{\Numeral{1192}\cdots\Numeral{1243}}&\emph{\emph{Messenger: \textgreek{ἐγώ, φίλη δέσποινα...}}}&\ensuremath{\Numeral{0.40}}\\\midrule\multicolumn{3}{r}{\ensuremath{\FN{cumulative}\;\FN{\wp}} = \ensuremath{\Numeral{0.50}}}\\\bottomrule\end{tabular}
}
  \vspace{6pt}
  \subfigure[Stichomythia]{
\begin{tabular}{clc}\toprule\textsc{lines}&\textsc{}&\ensuremath{\FN{\wp}}\\ \midrule\ensuremath{\Numeral{536}\cdots\Numeral{576}}&\emph{Ismene, Antigone and Kreon}&\ensuremath{\Numeral{0.29}}\\\ensuremath{\Numeral{728}\cdots\Numeral{757}}&\emph{Haimon and Kreon}&\ensuremath{\Numeral{0.38}}\\\ensuremath{\Numeral{991}\cdots\Numeral{997}}&\emph{Kreon and Teiresias}&\ensuremath{\Numeral{0.70}}\\\ensuremath{\Numeral{1047}\cdots\Numeral{1063}}&\emph{Kreon and Teiresias}&\ensuremath{\Numeral{0.12}}\\\ensuremath{\Numeral{1172}\cdots\Numeral{1179}}&\emph{Chorus and Messenger}&\ensuremath{\Numeral{0.29}}\\\midrule\multicolumn{3}{r}{\ensuremath{\FN{cumulative}\;\FN{\wp}} = \ensuremath{\Numeral{0.32}}}\\\bottomrule\end{tabular}
}
  \caption{Dialogue (Trimeters)}
  \label{tab:dialogue}
\end{table}

As can be seen from the data, lyrics have the highest degree of
non-projectivity, followed by speeches, then anapaests, and then stichomythia.
To try and understand why this is the case, it will be useful to discuss Greek
hyperbaton in more general terms.

Whereas in prose, hyperbaton corresponds to \emph{strong focus}, which ``does
not merely fill a gap in the addressee's knowledge but additionally evokes and
excludes alternatives'', hyperbaton in verse only entails weak focus, which
emphasizes but does not exclude \citep[p.\ 107, 303]{devine2000discontinuous}.

As a result, hyperbaton in verse may be used to evoke a kind of elevated style
without incidentally entailing more emphasis and other pragmatic effects than
intended. And so it should not be surprising that lyric passages, which reside
in the most poetic and elevated register present in tragic diction, should have
proved in the \emph{Antigone} to have the highest proportion of projectivity
violations.

Within the lyric passages, the laments appear to have consistently higher
\ensuremath{\FN{\wp}} than the choral odes, which may stem from their being much more emotive
and personal in nature; I have not come to a firm conclusion on that particular
matter. It should be noted that, whilst the individual odes conform tightly to
the cumulative \ensuremath{\FN{\wp}} of their category, there is a fair degree of variation
among the laments. Likewise, the anapaests vary so wildly in their \ensuremath{\FN{\wp}} that
it may be difficult to say very much about them that is relevant to the
questions we are considering.

As for dialog, longer-form speeches are largely conformant in their \ensuremath{\FN{\wp}},
with stichomythias varying a bit more. Speeches are a somewhat less projective
than the stichomythias, being typically more eloquent and long-winded than their
argumentative, choppy counterparts.

So far, the most surprising thing about the data is the degree to which certain
verse-types vary in \ensuremath{\FN{\wp}} (or, if you like, the degree to which other types
\emph{don't}). The data draw us, then, to the following conclusions:

\begin{enumerate}
\item Non-projectivity varies within a single metrical type (lyrics, iambic trimeters,
anapaests).

\item Certain registers seem to be more conventionalized with respect to \ensuremath{\FN{\wp}}
than others; that is, choral odes and speeches do not vary greatly amongst
themselves, but laments and anapaests do.
\end{enumerate}

\noindent
%
Lyric passages are in general less projective than anything else, but some
laments reach a degree of non-projectivity that exceeds the most elliptical odes
in the \emph{Antigone}. Further, within the trimeters, speeches are less projective
than stichomythias. From these things, then, we can say that that meter itself
would not seem to be a primary factor for predicting incidence and severity of
hyperbaton, but rather a secondary one at best.

That is to say, we know for a fact that passages in lyric meters have greater
\ensuremath{\FN{\wp}} than passages in other meters. Yet, the variation of \ensuremath{\FN{\wp}} within that
very meter indicates that there is some other factor involved, which very likely
has to do with register along two different dimensions, which is to say,
relative ``dignity of style'' and emotive force.

With regard to the very low \ensuremath{\FN{\wp}} found in the stichomythias, I suggest that
it is the necessary shortness of each utterance which is at fault here. That is,
the maximum ``damage'' that a hyperbaton can do is greatly lessened, when the
ultimate depth of the phrase structure is limited by its length (whence, for
instance, it is unlikely for a single hyperbaton to cause more than a few
projectivity violations).

\subsection{Representational Distortions}

The particular format and conventions adopted by the Perseus Project in their
dependency annotation can cause some distortions in the analysis of hyperbaton.
The first and most easily dispatched of these is that in addition to words, they
also include punctuation in the dependency trees (such as commas, periods and
question marks).

This is problematic, since such a mark may induce a technical hyperbaton, simply
by virtue of what the Perseus annotators have chosen to mark as its ``head'', to
the extent that it means anything at all for a punctuation mark to have a head.
To compensate, we simply filter out all punctuation during the parsing stage
(see \ensuremath{\FN{edgeFromXML}} on p.\ \pageref{func:edge-from-xml} in
Appendix~\ref{sec:parsing}).

\subsubsection*{Wackernagel's Law: Syntax or Phonology?}

Another potential source of distortion is the choice of the annotators to label
the members of postpositional particle chains in Wackernagel's Position as being
heads of each other in a chain from left to right, such as where \textgreek{μὲν}
is given as the head of \textgreek{δὴ} in Figure~\ref{fig:wackernagel}. I am
unconvinced either way as to whether this is the proper relation for particle
chains in Dependency Grammar, and simply would observe for the sake of argument
that an alternative analysis, where the verb is the head of each, might yield a
greater number of projectivity violations, as in
Figure~\ref{fig:wackernagel-redux}.

\begin{figure}[h!]
\centering
\xytext{
    \gkbarnode{τὰ}\xybarconnect[6]{3}&
    \gkbarnode{μὲν}&
    \gkbarnode{δὴ}&
    \gkbarnode{πόλεος}&
    \gkbarnode{...}&
    \gkbarnode{ὤρ\salt{θ}ησαν}
      \xybarconnect[9](U,UL){-5}
      \xybarconnect[9]{-4}
      \xybarconnect[9]{-3}
}
\caption{An alternative analysis of the dependency relations in
Figure~\ref{fig:wackernagel} yields a greater number of projectivity violations.}
\label{fig:wackernagel-redux}
\end{figure}

Further, if we allow ourselves to tiptoe outside the bounds of Dependency Grammar
for a moment into a more orthodox, derivational approach, we will see that
``hyperbata'' which arise from enclitics are likely of a very different kind of
displacement than that which occurs in, for instance, prepositional phrases or
noun phrases.  \citet{agbayani2010second} argue convincingly that the placement
of enclitics in so-called ``second position'' is phonological, and not
syntactic. I shall follow their analysis, which holds that the enclitics are
\emph{syntactically} in first position, and mandate \emph{phonologically} that
they have a word to their left which is from the modified phrase.

According to the Y-Model of Linguistics (Figure~\ref{fig:y-model}), phonological
concerns cannot affect semantic interpretation, and vice versa. So, when a
movement occurs along the path from syntax to phonology, it cannot have any
semantic force. Therefore, the \emph{phonological} movement of a word to the
position behind a postpositive particle cannot confer any particular focus,
which is consistent with our understanding that postpostive conjunctions,
asseveratives and other particles may apply semantic force to their complements,
and not \emph{per se} to the words onto which they are enclitic (i.e.\ the
emphasis in \textgreek{τὰ μὲν ...  πόλεος} is on \textgreek{τὰ πόλεος}, not just
\textgreek{τά}).

\begin{figure}[h!]
  \Tree
  [.{\sc syntax}
    {\sc phonology} {\sc semantics}
  ]
\caption{The Y-Model of Linguistics, in which Syntax is interpreted
separately into Phonological Form (PF) and Logical Form (LF).}
\label{fig:y-model}
\end{figure}

Yet, the other kinds of displacement do indeed induce focus, whether it be weak
or strong. And so, whether these hyperbata are to be taken as a kind of movement
or not, it is untenable to analyze them as phonological movements: they must be
present in the syntax prior to translation to PF. Thus these are distinct from
those displacements which arise from Wackernagel's Law.

In this way, a general analysis of hyperbaton which uses Dependency Grammar as its
basis will invariably fail to recognize the difference between displacements
which are \emph{phonological} in nature and those which are \emph{syntactic},
where the latter are the true target of our investigation. This confounding
factor, then, must be kept in mind, when analyzing data from such an
experiment.

\nocite{sophocles1999sophocles, euripides2002euripides}
\bibliographystyle{plainnat} % basic style, author-year citations
\bibliography{Analyze} % name your BibTeX data base
\newpage

\begin{appendices}

The functions used in parsing and computing the data for this paper are
developed here in the programming language Haskell. Haskell is a typed lambda
calculus with inductive data types and type classes; the listings below use
standard Haskell syntax with the exception of some infix operators to improve
readability, and the addition of so-called ``idiom brackets'', which allow a
more syntactically clean presentation of function application within a
context \citep{mcbride2008functional}.

\section{Algorithm \& Data Representation}
\label{sec:algorithm}

Dependency trees are a recursive data structure with a head node, which may have
any number of arcs drawn to further trees (this is called a \emph{rose tree}).
We represent them as a Haskell data-type as follows:
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{data}\;\mathsf{Tree}\;\VarSym{\alpha}\mathrel{=}\VarSym{\alpha}\curvearrowright[\mskip1.5mu \mathsf{Tree}\;\VarSym{\alpha}\mskip1.5mu]{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
This can be read as ``For all types \ensuremath{\VarSym{\alpha}}, a \ensuremath{\mathsf{Tree}} of \ensuremath{\VarSym{\alpha}} is constructed from a
\emph{label} of type \ensuremath{\VarSym{\alpha}} and a \emph{subforest} of \ensuremath{\mathsf{Tree}}s of \ensuremath{\VarSym{\alpha}},'' where brackets are a notation
for lists.

Given a tree, we can extract its root label or its subforest by pattern matching
on its structure as follows:
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{getLabel}\ConSym{::}\mathsf{Tree}\;\VarSym{\alpha}\to \VarSym{\alpha}{}\<[E]%
\\
\>[3]{}\FN{getLabel}\;(\Varid{l}\curvearrowright\anonymous )\mathrel{=}\Varid{l}{}\<[E]%
\\
\>[3]{}\FN{getForest}\ConSym{::}\mathsf{Tree}\;\VarSym{\alpha}\to [\mskip1.5mu \mathsf{Tree}\;\VarSym{\alpha}\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\FN{getForest}\;(\anonymous \curvearrowright\Varid{ts})\mathrel{=}\Varid{ts}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\subsection{From Edges to Trees}
\label{sec:edges-to-trees}

We shall consider each word index to be a \emph{vertex}, and each pair of
vertices to be an \ensuremath{\mathsf{Edge}}, which we shall write as follows:
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{data}\;\mathsf{Edge}\;\VarSym{\alpha}\mathrel{=}\VarSym{\alpha}\leftrightarrow\VarSym{\alpha}\;\mathkw{deriving}\;\mathsf{Eq}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\ignore{
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{deriving}\;\mathkw{instance}\;\mathsf{Show}\;\VarSym{\alpha}\Rightarrow \mathsf{Show}\;(\mathsf{Edge}\;\VarSym{\alpha}){}\<[E]%
\\
\>[3]{}\mathkw{deriving}\;\mathkw{instance}\;\mathsf{Show}\;\mathsf{Sentence}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
}
%
An \ensuremath{\mathsf{Edge}\;\VarSym{\alpha}} is given by two vertices of type \ensuremath{\VarSym{\alpha}}; the \ensuremath{\mathkw{deriving}\;\mathsf{Eq}} statement
generates the code that is necessary to determine whether or not two \ensuremath{\mathsf{Edge}}s are
equal using the \ensuremath{(\equiv )} operator. In order to perform our analysis, we should wish
to transform the raw list of edges into a tree structure. The basic procedure is
as follows:

First, we try to find the root vertex of the tree. This will be a vertex that is
given as the head of one of the words, but does not itself appear in the
sentence:

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{12}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{rootVertex}\ConSym{::}\mathsf{Eq}\;\VarSym{\alpha}\Rightarrow [\mskip1.5mu \mathsf{Edge}\;\VarSym{\alpha}\mskip1.5mu]\to \mathsf{Maybe}\;\VarSym{\alpha}{}\<[E]%
\\
\>[3]{}\FN{rootVertex}\;\Varid{es}\mathrel{=}\FN{find}\;(\notin \FN{deps})\;\FN{heads}\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{heads}{}\<[12]%
\>[12]{}\mathrel{=}\llbracket\;(\lambda (\Varid{x}\leftrightarrow\Varid{y})\to \Varid{x})\;\Varid{es}\;\rrbracket{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{deps}{}\<[12]%
\>[12]{}\mathrel{=}\llbracket\;(\lambda (\Varid{x}\leftrightarrow\Varid{y})\to \Varid{y})\;\Varid{es}\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
If the data that we are working with are not well-formed, there is a chance that
we will not find a root vertex; that is why the type is given as \ensuremath{\mathsf{Maybe}}.

Then, given a root vertex, we look to find all the edges that
it touches, and try to build the subtrees that are connected with those edges.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{18}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{onEdge}\ConSym{::}\mathsf{Eq}\;\VarSym{\alpha}\Rightarrow \VarSym{\alpha}\to \mathsf{Edge}\;\VarSym{\alpha}\to \mathbb{B}{}\<[E]%
\\
\>[3]{}\FN{onEdge}\;\Varid{i}\;(\Varid{x}\leftrightarrow\Varid{y})\mathrel{=}\Varid{x}\equiv \Varid{i}\mathrel{\vee}\Varid{y}\equiv \Varid{i}{}\<[E]%
\\[\blanklineskip]%
\>[3]{}\FN{oppositeVertex}\ConSym{::}\mathsf{Eq}\;\VarSym{\alpha}\Rightarrow \VarSym{\alpha}\to \mathsf{Edge}\;\VarSym{\alpha}\to \VarSym{\alpha}{}\<[E]%
\\
\>[3]{}\FN{oppositeVertex}\;\Varid{i}\;(\Varid{x}\leftrightarrow\Varid{y}){}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{x}\equiv \Varid{i}{}\<[18]%
\>[18]{}\mathrel{=}\Varid{y}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{otherwise}{}\<[18]%
\>[18]{}\mathrel{=}\Varid{x}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
This is done recursively until the list of edges is exhausted and we have a
complete tree structure:

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{7}{@{}>{\hspre}l<{\hspost}@{}}%
\column{24}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{treeFromEdges}\ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow [\mskip1.5mu \mathsf{Edge}\;\VarSym{\alpha}\mskip1.5mu]\to \mathsf{Maybe}\;(\mathsf{Tree}\;\VarSym{\alpha}){}\<[E]%
\\
\>[3]{}\FN{treeFromEdges}\;\Varid{es}\mathrel{=}\llbracket\;(\FN{buildWithRoot}\;\Varid{es})\;(\FN{rootVertex}\;\Varid{es})\;\rrbracket\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{buildWithRoot}\;\Varid{es}\;\Varid{root}\mathrel{=}\Varid{root}\curvearrowright\FN{sortedChildren}\;\mathkw{where}{}\<[E]%
\\
\>[5]{}\hsindent{2}{}\<[7]%
\>[7]{}\FN{roots}{}\<[24]%
\>[24]{}\mathrel{=}\llbracket\;(\FN{oppositeVertex}\;\Varid{root})\;\FN{localVertices}\;\rrbracket{}\<[E]%
\\
\>[5]{}\hsindent{2}{}\<[7]%
\>[7]{}\FN{children}{}\<[24]%
\>[24]{}\mathrel{=}\llbracket\;(\FN{buildWithRoot}\;\FN{foreignVertices})\;\FN{roots}\;\rrbracket{}\<[E]%
\\
\>[5]{}\hsindent{2}{}\<[7]%
\>[7]{}\FN{localVertices}{}\<[24]%
\>[24]{}\mathrel{=}\FN{filter}\;(\FN{onEdge}\;\Varid{root})\;\Varid{es}{}\<[E]%
\\
\>[5]{}\hsindent{2}{}\<[7]%
\>[7]{}\FN{foreignVertices}{}\<[24]%
\>[24]{}\mathrel{=}\FN{filter}\;(\neg \circ\FN{onEdge}\;\Varid{root})\;\Varid{es}{}\<[E]%
\\
\>[5]{}\hsindent{2}{}\<[7]%
\>[7]{}\FN{sortedChildren}{}\<[24]%
\>[24]{}\mathrel{=}\FN{sortBy}\;(\FN{compare}\mathbin{`\FN{on}`}\FN{getLabel})\;\FN{children}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks

\subsection{Counting Violations}
\label{sec:counting}

The basic procedure for counting projectivity violations is as follows: flatten
down the tree into a list of edges coindexed by their vertical position in the
tree; then traverse the list and see how many times these edges intersect each
other.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{type}\;\mathsf{Level}\mathrel{=}\mathbb{Z}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
The vertical position of a node in a tree is represented as its \ensuremath{\mathsf{Level}},
counting backwards from the total depth of the tree. That is, the deepest node
in the tree is at level \ensuremath{\Numeral{0}}, and the highest node in the tree is at level \ensuremath{\Varid{n}},
where \ensuremath{\Varid{n}} is the tree's depth.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{15}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{levels}\ConSym{::}\mathsf{Tree}\;\VarSym{\alpha}\to [\mskip1.5mu [\mskip1.5mu \VarSym{\alpha}\mskip1.5mu]\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\FN{levels}\;\Varid{t}\mathrel{=}\FN{fmap}\;(\FN{fmap}\;\FN{getLabel})\mathbin{\$}{}\<[E]%
\\
\>[3]{}\hsindent{12}{}\<[15]%
\>[15]{}\FN{takeWhile}\;(\neg \circ\FN{null})\mathbin{\$}{}\<[E]%
\\
\>[3]{}\hsindent{12}{}\<[15]%
\>[15]{}\FN{iterate}\;(\bind \FN{getForest})\;[\mskip1.5mu \Varid{t}\mskip1.5mu]{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{depth}\ConSym{::}\mathsf{Tree}\;\VarSym{\alpha}\to \mathbb{Z}{}\<[E]%
\\
\>[3]{}\FN{depth}\mathrel{=}\FN{length}\circ\FN{levels}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
We can now annotate each node in a tree with what level it is at:
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{annotateLevels}\ConSym{::}\mathsf{Tree}\;\VarSym{\alpha}\to \mathsf{Tree}\;(\mathsf{Level},\VarSym{\alpha}){}\<[E]%
\\
\>[3]{}\FN{annotateLevels}\mathrel{=}\llbracket\;\FN{aux}\;\FN{depth}\;\FN{id}\;\rrbracket\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{aux}\;\Varid{l}\;(\Varid{x}\curvearrowright\Varid{ts})\mathrel{=}(\Varid{l},\Varid{x})\curvearrowright\llbracket\;(\FN{aux}\;(\Varid{l}\VarSym{-}\Numeral{1}))\;\Varid{ts}\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
Then, we fold up the tree into a list of edges and levels:

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{7}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{allEdges}\ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow \mathsf{Tree}\;\VarSym{\alpha}\to [\mskip1.5mu (\mathsf{Level},\mathsf{Edge}\;\VarSym{\alpha})\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\FN{allEdges}\mathrel{=}\FN{aux}\circ\FN{annotateLevels}\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{aux}\;((\anonymous ,\Varid{x})\curvearrowright\Varid{ts})\mathrel{=}\Varid{ts}\bind \FN{go}\;\mathkw{where}{}\<[E]%
\\
\>[5]{}\hsindent{2}{}\<[7]%
\>[7]{}\FN{go}\;\Varid{t}\mathord{@}((\Varid{l},\Varid{y})\curvearrowright\anonymous )\mathrel{=}(\Varid{l},\FN{edgeWithRange}\;[\mskip1.5mu \Varid{x},\Varid{y}\mskip1.5mu])\mathbin{:}\FN{aux}\;\Varid{t}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{edgeWithRange}\ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow [\mskip1.5mu \VarSym{\alpha}\mskip1.5mu]\to \mathsf{Edge}\;\VarSym{\alpha}{}\<[E]%
\\
\>[3]{}\FN{edgeWithRange}\mathrel{=}\llbracket\;\FN{minimum}\;\leftrightarrow\;\FN{maximum}\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
A handy way to think of edges annotated by levels is as a representation of the
arc itself, where the vertices of the edge are the endpoints, and the level is the
height of the arc. Now, we can count the violations that occur between two arcs.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{54}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{checkEdges}\ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow (\mathsf{Level},\mathsf{Edge}\;\VarSym{\alpha})\to (\mathsf{Level},\mathsf{Edge}\;\VarSym{\alpha})\to \mathbb{Z}{}\<[E]%
\\
\>[3]{}\FN{checkEdges}\;(\Varid{l},\Varid{xy}\mathord{@}(\Varid{x}\leftrightarrow\Varid{y}))\;(\Varid{l'},\Varid{uv}\mathord{@}(\Varid{u}\leftrightarrow\Varid{v})){}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{x}\in_E\Varid{uv}\mathrel{\wedge}((\Varid{y}\geq \Varid{v}\mathrel{\wedge}\Varid{l}\VarSym{>}\Varid{l'})\mathrel{\vee}\Varid{y}\VarSym{>}\Varid{v}){}\<[54]%
\>[54]{}\mathrel{=}\Numeral{1}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{y}\in_E\Varid{uv}\mathrel{\wedge}((\Varid{x}\leq \Varid{u}\mathrel{\wedge}\Varid{l}\VarSym{>}\Varid{l'})\mathrel{\vee}\Varid{u}\VarSym{<}\Varid{u}){}\<[54]%
\>[54]{}\mathrel{=}\Numeral{1}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{u}\in_E\Varid{xy}\mathrel{\wedge}((\Varid{v}\geq \Varid{y}\mathrel{\wedge}\Varid{l}\VarSym{<}\Varid{l'})\mathrel{\vee}\Varid{v}\VarSym{>}\Varid{y}){}\<[54]%
\>[54]{}\mathrel{=}\Numeral{1}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{v}\in_E\Varid{xy}\mathrel{\wedge}((\Varid{u}\leq \Varid{x}\mathrel{\wedge}\Varid{l}\VarSym{<}\Varid{l'})\mathrel{\vee}\Varid{u}\VarSym{<}\Varid{x}){}\<[54]%
\>[54]{}\mathrel{=}\Numeral{1}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{x}\in_E\Varid{uv}\mathrel{\wedge}\Varid{y}\in_E\Varid{uv}\mathrel{\wedge}\Varid{l}\geq \Varid{l'}{}\<[54]%
\>[54]{}\mathrel{=}\Numeral{2}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{u}\in_E\Varid{xy}\mathrel{\wedge}\Varid{v}\in_E\Varid{xy}\mathrel{\wedge}\Varid{l}\leq \Varid{l'}{}\<[54]%
\>[54]{}\mathrel{=}\Numeral{2}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mid \Varid{otherwise}{}\<[54]%
\>[54]{}\mathrel{=}\Numeral{0}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
We determine whether a vertex is in the bounds of an edge using \ensuremath{\cdot \in_E\cdot }.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{24}{@{}>{\hspre}c<{\hspost}@{}}%
\column{24E}{@{}l@{}}%
\column{28}{@{}>{\hspre}l<{\hspost}@{}}%
\column{42}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\cdot \in_E\cdot \ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow \VarSym{\alpha}\to \mathsf{Edge}\;\VarSym{\alpha}\to \mathbb{B}{}\<[E]%
\\
\>[3]{}\Varid{z}\in_E\Varid{x}\leftrightarrow\Varid{y}{}\<[24]%
\>[24]{}\mathrel{=}{}\<[24E]%
\>[28]{}\Varid{z}\VarSym{>}\FN{minimum}\;{}\<[42]%
\>[42]{}[\mskip1.5mu \Varid{x},\Varid{y}\mskip1.5mu]{}\<[E]%
\\
\>[24]{}\mathrel{\wedge}{}\<[24E]%
\>[28]{}\Varid{z}\VarSym{<}\FN{maximum}\;{}\<[42]%
\>[42]{}[\mskip1.5mu \Varid{x},\Varid{y}\mskip1.5mu]{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\ignore{
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{x}\notin_E\Varid{xy}\mathrel{=}\neg \;(\Varid{x}\in_E\Varid{xy}){}\<[E]%
\ColumnHook
\end{hscode}\resethooks
}
%
We can now use what we've built to count the intersections that occur in a
collection of edges. This is done by adding up the result of \ensuremath{\FN{checkEdges}} of the
combination of each edge with the subset of edges which are at or below its
level:

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{25}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{edgeViolations}\ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow [\mskip1.5mu (\mathsf{Level},\mathsf{Edge}\;\VarSym{\alpha})\mskip1.5mu]\to \mathbb{Z}{}\<[E]%
\\
\>[3]{}\FN{edgeViolations}\;\Varid{xs}\mathrel{=}\FN{sum}\;\llbracket\;\FN{violationsWith}\;\Varid{xs}\;\rrbracket\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{rangesBelow}\;(\Varid{l},\anonymous ){}\<[25]%
\>[25]{}\mathrel{=}\FN{filter}\;(\lambda (\Varid{l'},\anonymous )\to \Varid{l'}\leq \Varid{l})\;\Varid{xs}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{violationsWith}\;\Varid{x}{}\<[25]%
\>[25]{}\mathrel{=}\FN{sum}\;\llbracket\;(\FN{checkEdges}\;\Varid{x})\;(\FN{rangesBelow}\;\Varid{x})\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\subsection{Computing \ensuremath{\FN{\wp}}}
\label{sec:computing-proj}

We introduce a data type \ensuremath{\FN{\wp}} of integer-to-integer ratios which may be
computed into a rational.

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{data}\;\mathfrak{P}\mathrel{=}\mathfrak{P}\;\{\mskip1.5mu \FN{violationCount}\ConSym{::}\mathbb{Z},\FN{edgeCount}\ConSym{::}\mathbb{Z}\mskip1.5mu\}{}\<[E]%
\\
\>[3]{}\FN{compute_\wp}\ConSym{::}\mathfrak{P}\to \mathbb{Q}{}\<[E]%
\\
\>[3]{}\FN{compute_\wp}\mathrel{=}\left\llbracket\;\dfrac{\FN{violationCount}}{\FN{edgeCount}}\right\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\ignore{
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\left\llbracket\;\dfrac{\cdot }{\cdot }\right\rrbracket\mathrel{=}\llbracket\;\dfrac{\cdot }{\cdot }\;\cdot \;\cdot \;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
}

\noindent
Furthermore, \ensuremath{\FN{\wp}}s generate a monoid, which is an algebraic structure that
abstracts out the notion of an identity and an associative binary operation that
respects that identity. In this way, we can combine \ensuremath{\FN{\wp}} values:
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{instance}\;\mathsf{Monoid}\;\mathfrak{P}\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathcal{E}\mathrel{=}\mathfrak{P}\;\Numeral{0}\;\Numeral{0}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}(\mathfrak{P}\;\Varid{x}\;\Varid{y})\oplus(\mathfrak{P}\;\Varid{u}\;\Varid{v})\mathrel{=}\mathfrak{P}\;(\Varid{x}\VarSym{+}\Varid{u})\;(\Varid{y}\VarSym{+}\Varid{v}){}\<[E]%
\ColumnHook
\end{hscode}\resethooks
Finally, \ensuremath{\FN{\wp}} may be computed for trees.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{\wp}\ConSym{::}\mathsf{Ord}\;\VarSym{\alpha}\Rightarrow \mathsf{Tree}\;\VarSym{\alpha}\to \mathfrak{P}{}\<[E]%
\\
\>[3]{}\FN{\wp}\mathrel{=}\llbracket\;\mathfrak{P}\;\FN{edgeViolations}\;\FN{length}\;\rrbracket\circ\FN{allEdges}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\section{Working with the Perseus Treebank}
\label{sec:working-with-treebase}

\subsection{Parsing the XML}
\label{sec:parsing}

\noindent
We can express the general shape of a treebank document as follows:

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{type}\;\mathsf{Document}\mathrel{=}[\mskip1.5mu \mathsf{Sentence}\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\mathkw{data}\;\mathsf{Sentence}\mathrel{=}\mathsf{Sentence}\;\{\mskip1.5mu \FN{sentenceId}\ConSym{::}\mathbb{Z},\FN{sentenceEdges}\ConSym{::}[\mskip1.5mu \mathsf{Edge}\;\mathbb{Z}\mskip1.5mu]\mskip1.5mu\}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
To construct a \ensuremath{\mathsf{Document}} from the contents of an XML file, it suffices to
find all of the sentences.

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{documentFromXML}\ConSym{::}[\mskip1.5mu \mathsf{Content}\mskip1.5mu]\to \mathsf{Document}{}\<[E]%
\\
\>[3]{}\FN{documentFromXML}\;\Varid{xml}\mathrel{=}\FN{catMaybes}\;\llbracket\;\FN{sentenceFromXML}\;\FN{elems}\;\rrbracket\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{elems}\mathrel{=}\FN{onlyElems}\;\Varid{xml}\bind \FN{findElements}\;(\FN{simpleName}\;\Char{\char34 sentence\char34}){}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\ensuremath{\mathsf{Sentence}}s are got by taking the contents of their \lstinline{id} attribute,
and extracting edges from their children.

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{15}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{sentenceFromXML}\ConSym{::}\mathsf{Element}\to \mathsf{Maybe}\;\mathsf{Sentence}{}\<[E]%
\\
\>[3]{}\FN{sentenceFromXML}\;\Varid{e}\mathrel{=}\llbracket\;\mathsf{Sentence}\;(\FN{readAttr}\;\Char{\char34 id\char34}\;\Varid{e})\;(\FN{pure}\;\FN{edges})\;\rrbracket\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{edges}{}\<[15]%
\>[15]{}\mathrel{=}\FN{catMaybes}\;\llbracket\;\FN{edgeFromXML}\;\FN{children}\;\rrbracket{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{children}{}\<[15]%
\>[15]{}\mathrel{=}\FN{findChildren}\;(\FN{simpleName}\;\Char{\char34 word\char34})\;\Varid{e}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
An edge is got from an element by taking the contents of its \lstinline{id}
attribute with the contents of its \lstinline{head} attribute. We make sure to
filter out punctuation which would skew our data.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{8}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{edgeFromXML}\ConSym{::}\mathsf{Element}\to \mathsf{Maybe}\;(\mathsf{Edge}\;\mathbb{Z}){}\<[E]%
\\
\>[3]{}\FN{edgeFromXML}\;\Varid{e}\mathrel{=}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{case}\;\FN{findAttr}\;(\FN{simpleName}\;\Char{\char34 form\char34})\;\Varid{e}\;\mathkw{of}{}\<[E]%
\\
\>[5]{}\hsindent{3}{}\<[8]%
\>[8]{}\mathsf{Just}\;\Varid{x}\mid \Varid{x}\in [\mskip1.5mu \Char{\char34 .\char34},\Char{\char34 ,\char34},\Char{\char34 ;\char34},\Char{\char34 :\char34}\mskip1.5mu]\to \mathsf{Nothing}{}\<[E]%
\\
\>[5]{}\hsindent{3}{}\<[8]%
\>[8]{}\Varid{otherwise}\to \llbracket\;(\FN{readAttr}\;\Char{\char34 head\char34}\;\Varid{e})\;\leftrightarrow\;(\FN{readAttr}\;\Char{\char34 id\char34}\;\Varid{e})\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\label{func:edge-from-xml}
%
Thence, turn a sentence into a tree by its edges using the machinery from
Section~\ref{sec:edges-to-trees}.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{treeFromSentence}\ConSym{::}\mathsf{Sentence}\to \mathsf{Maybe}\;(\mathsf{Tree}\;\mathbb{Z}){}\<[E]%
\\
\>[3]{}\FN{treeFromSentence}\;(\mathsf{Sentence}\;\anonymous \;\Varid{ws})\mathrel{=}\FN{treeFromEdges}\;\Varid{ws}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
By applying \ensuremath{\FN{treeFromSentence}} to every sentence within a document, we can
generate all the trees in a document.
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{treesFromDocument}\ConSym{::}\mathsf{Document}\to [\mskip1.5mu \mathsf{Tree}\;\mathbb{Z}\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\FN{treesFromDocument}\;\Varid{ss}\mathrel{=}\FN{catMaybes}\;\llbracket\;\FN{treeFromSentence}\;\Varid{ss}\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
By combining the above, we also may derive a document structure from a file on
disk.

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{documentFromFile}\ConSym{::}\mathsf{FilePath}\to \mathsf{IO}\;\mathsf{Document}{}\<[E]%
\\
\>[3]{}\FN{documentFromFile}\;\Varid{path}\mathrel{=}\llbracket\;(\FN{documentFromXML}\circ\FN{parseXML})\;(\FN{readFile}\;\Varid{path})\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\subsection{Analysis of Data}
\label{sec:analyzing}

We compute the cumulative \ensuremath{\FN{\wp}} of the trees contained in a document as follows:
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{analyzeDocument}\ConSym{::}\mathsf{Document}\to \mathfrak{P}{}\<[E]%
\\
\>[3]{}\FN{analyzeDocument}\;\Varid{doc}\mathrel{=}\FN{mconcat}\;\llbracket\;\FN{\wp}\;(\FN{treesFromDocument}\;\Varid{doc})\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
We will wish to compare the \ensuremath{\FN{\wp}} for parts of the \emph{Antigone}. A section
is given by a two sentence indices (a beginning and an end):
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{data}\;\mathsf{Section}\mathrel{=}\mathbb{Z}\cdots\mathbb{Z}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
Then, the entire document can be cut down into smaller documents by section:

\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{restrictDocument}\ConSym{::}\mathsf{Section}\to \mathsf{Document}\to \mathsf{Document}{}\<[E]%
\\
\>[3]{}\FN{restrictDocument}\;(\Varid{start}\cdots\Varid{finish})\mathrel{=}\FN{filter}\;\FN{withinSection}\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{withinSection}\;(\mathsf{Sentence}\;\Varid{i}\;\anonymous )\mathrel{=}\Varid{i}\geq \Varid{start}\mathrel{\wedge}\Varid{i}\leq \Varid{finish}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\ignore{
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{makeTable}\ConSym{::}[\mskip1.5mu (\mathsf{Section},\mathsf{Section},\mathsf{String})\mskip1.5mu]\to \mathsf{IO}\;\mathsf{UnquotedString}{}\<[E]%
\\
\>[3]{}\Varid{makeTable}\;\Varid{sections}\mathrel{=}\mathkw{do}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\Varid{antigone}\leftarrow \FN{documentFromFile}\;\Char{\char34 antigone.xml\char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{let}\;\Varid{pre}\mathrel{=}\Char{\char34 \char92 \char92 begin\char123 tabular\char125 \char123 clc\char125 \char92 \char92 toprule\char92 \char92 textsc\char123 lines\char125 \&\char92 \char92 textsc\char123 \char125 \&|proj|\char92 \char92 \char92 \char92 ~\char92 \char92 midrule\char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{let}\;\Varid{post}\mathrel{=}\Char{\char34 \char92 \char92 bottomrule\char92 \char92 end\char123 tabular\char125 \char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{let}\;\Varid{projs}\mathrel{=}(\lambda (\anonymous ,\Varid{r},\anonymous )\to \FN{analyzeDocument}\mathbin{\$}\FN{restrictDocument}\;\Varid{r}\;\Varid{antigone})\;\mathop{\langle\$\rangle}\;\Varid{sections}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{let}\;\Varid{totalproj}\mathrel{=}\FN{compute_\wp}\mathbin{\$}\FN{mconcat}\;\Varid{projs}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{let}\;\Varid{body}\mathrel{=}\FN{fold}\mathbin{\$}\FN{uncurry}\;\Varid{makeTableRow}\;\mathop{\langle\$\rangle}\;\Varid{zip}\;\Varid{sections}\;(\FN{compute_\wp}\;\mathop{\langle\$\rangle}\;\Varid{projs}){}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\mathkw{let}\;\Varid{avg}\mathrel{=}\Char{\char34 \char92 \char92 midrule\char92 \char92 multicolumn\char123 3\char125 \char123 r\char125 \char123 |cumulative~proj|~=~|\char34}\plus \Varid{showRational}\;\Varid{totalproj}\plus \Char{\char34 |\char125 \char92 \char92 \char92 \char92 \char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{return}\circ\mathsf{Unquote}\mathbin{\$}\Varid{pre}\plus \Varid{body}\plus \Varid{avg}\plus \Varid{post}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{showRational}\;\Varid{x}\mathrel{=}\Varid{printf}\;\Char{\char34 \%.2f\char34}\;(\Varid{fromInteger}\;(\Varid{round}\mathbin{\$}\Varid{x}\VarSym{*}(\Numeral{10} \Numeral{2}))\mathbin{/}(\Numeral{10.0}\mathbin{**}\Numeral{2})\ConSym{::}\mathsf{Float}){}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{makeTableRow}\ConSym{::}(\mathsf{Section},\mathsf{Section},\mathsf{String})\to \mathbb{Q}\to \mathsf{String}{}\<[E]%
\\
\>[3]{}\Varid{makeTableRow}\;(\Varid{ls},\Varid{r},\Varid{d})\;\Varid{om}\mathrel{=}\Varid{lines}\plus \Char{\char34 \&\char34}\plus \Varid{desc}\plus \Char{\char34 \&\char34}\plus \FN{\wp}\plus \Char{\char34 \char92 \char92 \char92 \char92 \char34}\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\Varid{desc}\mathrel{=}\Char{\char34 \char92 \char92 emph\char123 \char34}\plus \Varid{d}\plus \Char{\char34 \char125 \char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\Varid{lines}\mathrel{=}\Char{\char34 |\char34}\plus \Varid{show}\;\Varid{ls}\plus \Char{\char34 |\char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\Varid{range}\mathrel{=}\Char{\char34 |\char34}\plus \Varid{show}\;\Varid{r}\plus \Char{\char34 |\char34}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\FN{\wp}\mathrel{=}\Char{\char34 |\char34}\plus \Varid{showRational}\;\Varid{om}\plus \Char{\char34 |\char34}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{5}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\mathkw{deriving}\;\mathkw{instance}\;\mathsf{Show}\;\mathsf{Section}{}\<[E]%
\\
\>[3]{}\mathkw{newtype}\;\mathsf{UnquotedString}\mathrel{=}\mathsf{Unquote}\;\mathsf{String}{}\<[E]%
\\
\>[3]{}\mathkw{instance}\;\mathsf{Show}\;\mathsf{UnquotedString}\;\mathkw{where}{}\<[E]%
\\
\>[3]{}\hsindent{2}{}\<[5]%
\>[5]{}\Varid{show}\;(\mathsf{Unquote}\;\Varid{str})\mathrel{=}\Varid{str}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{11}{@{}>{\hspre}c<{\hspost}@{}}%
\column{11E}{@{}l@{}}%
\column{14}{@{}>{\hspre}l<{\hspost}@{}}%
\column{35}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{odes}\ConSym{::}[\mskip1.5mu (\mathsf{Section},\mathsf{Section},\mathsf{String})\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\Varid{odes}\mathrel{=}{}\<[11]%
\>[11]{}[\mskip1.5mu {}\<[11E]%
\>[14]{}(\Numeral{100}\cdots\Numeral{154},{}\<[35]%
\>[35]{}\Numeral{2900135}\cdots\Numeral{2900144},\Char{\char34 First~choral~ode\char34}),{}\<[E]%
\\
\>[14]{}(\Numeral{332}\cdots\Numeral{375},{}\<[35]%
\>[35]{}\Numeral{2900236}\cdots\Numeral{2900247},\Char{\char34 Second~choral~ode\char34}),{}\<[E]%
\\
\>[14]{}(\Numeral{583}\cdots\Numeral{625},{}\<[35]%
\>[35]{}\Numeral{2900390}\cdots\Numeral{2900402},\Char{\char34 Third~choral~ode\char34}),{}\<[E]%
\\
\>[14]{}(\Numeral{781}\cdots\Numeral{800},{}\<[35]%
\>[35]{}\Numeral{2900496}\cdots\Numeral{2900501},\Char{\char34 Fourth~choral~ode\char34}),{}\<[E]%
\\
\>[14]{}(\Numeral{944}\cdots\Numeral{987},{}\<[35]%
\>[35]{}\Numeral{2900554}\cdots\Numeral{2900566},\Char{\char34 Fifth~choral~ode\char34}),{}\<[E]%
\\
\>[14]{}(\Numeral{1116}\cdots\Numeral{1152},{}\<[35]%
\>[35]{}\Numeral{2900649}\cdots\Numeral{2900654},\Char{\char34 Sixth~choral~ode\char34}){}\<[E]%
\\
\>[11]{}\mskip1.5mu]{}\<[11E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{12}{@{}>{\hspre}c<{\hspost}@{}}%
\column{12E}{@{}l@{}}%
\column{14}{@{}>{\hspre}l<{\hspost}@{}}%
\column{35}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{kommoi}\mathrel{=}[\mskip1.5mu {}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{806}\cdots\Numeral{816},{}\<[35]%
\>[35]{}\Numeral{2900503}\cdots\Numeral{2900504},\Char{\char34 Antigone's~Lament\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{823}\cdots\Numeral{833},{}\<[35]%
\>[35]{}\Numeral{2900506}\cdots\Numeral{2900507},\Char{\char34 Antigone's~Lament~(cntd.)\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{839}\cdots\Numeral{882},{}\<[35]%
\>[35]{}\Numeral{2900511}\cdots\Numeral{2900526},\Char{\char34 Antigone's~Lament~(cntd.)\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{1261}\cdots\Numeral{1269},{}\<[35]%
\>[35]{}\Numeral{2900714}\cdots\Numeral{2900716},\Char{\char34 Kreon's~Lament\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{1283}\cdots\Numeral{1292},{}\<[35]%
\>[35]{}\Numeral{2900725}\cdots\Numeral{2900729},\Char{\char34 Kreon's~Lament~(cntd.)\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{1306}\cdots\Numeral{1311},{}\<[35]%
\>[35]{}\Numeral{2900737}\cdots\Numeral{2900739},\Char{\char34 Kreon's~Lament~(cntd.)\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{1317}\cdots\Numeral{1325},{}\<[35]%
\>[35]{}\Numeral{2900743}\cdots\Numeral{2900745},\Char{\char34 Kreon's~Lament~(cntd.)\char34}),{}\<[E]%
\\
\>[3]{}\hsindent{11}{}\<[14]%
\>[14]{}(\Numeral{1239}\cdots\Numeral{1246},{}\<[35]%
\>[35]{}\Numeral{2900756}\cdots\Numeral{2900767},\Char{\char34 Kreon's~Lament~(cntd.)\char34}){}\<[E]%
\\
\>[3]{}\hsindent{9}{}\<[12]%
\>[12]{}\mskip1.5mu]{}\<[12E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{16}{@{}>{\hspre}c<{\hspost}@{}}%
\column{16E}{@{}l@{}}%
\column{19}{@{}>{\hspre}l<{\hspost}@{}}%
\column{40}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{anapaests}\ConSym{::}[\mskip1.5mu (\mathsf{Section},\mathsf{Section},\mathsf{String})\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\Varid{anapaests}\mathrel{=}{}\<[16]%
\>[16]{}[\mskip1.5mu {}\<[16E]%
\>[19]{}(\Numeral{155}\cdots\Numeral{161},{}\<[40]%
\>[40]{}\Numeral{2900145}\cdots\Numeral{2900145},\Char{\char34 Kreon's~Entrance\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{376}\cdots\Numeral{383},{}\<[40]%
\>[40]{}\Numeral{2900248}\cdots\Numeral{2900251},\Char{\char34 Antigone's~Entrance\char34}),\Comment{-{}-\enskip sung}{}\<[E]%
\\
\>[19]{}(\Numeral{526}\cdots\Numeral{530},{}\<[40]%
\>[40]{}\Numeral{2900345}\cdots\Numeral{2900346},\Char{\char34 Ismene's~Entrance\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{626}\cdots\Numeral{630},{}\<[40]%
\>[40]{}\Numeral{2900403}\cdots\Numeral{2900404},\Char{\char34 Haimon's~Entrance\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{801}\cdots\Numeral{805},{}\<[40]%
\>[40]{}\Numeral{2900502}\cdots\Numeral{2900502},\Char{\char34 Antigone's~Entrance\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{817}\cdots\Numeral{822},{}\<[40]%
\>[40]{}\Numeral{2900505}\cdots\Numeral{2900505},\Char{\char34 Chorus~to~Antigone\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{834}\cdots\Numeral{838},{}\<[40]%
\>[40]{}\Numeral{2900508}\cdots\Numeral{2900510},\Char{\char34 Chorus~to~Antigone\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{929}\cdots\Numeral{943},{}\<[40]%
\>[40]{}\Numeral{2900548}\cdots\Numeral{2900553},\Char{\char34 Chorus,~Kreon~and~Antigone\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{1257}\cdots\Numeral{1260},{}\<[40]%
\>[40]{}\Numeral{2900713}\cdots\Numeral{2900713},\Char{\char34 Chorus~before~Kreon's~Kommos\char34}),{}\<[E]%
\\
\>[19]{}(\Numeral{1347}\cdots\Numeral{1353},{}\<[40]%
\>[40]{}\Numeral{2900758}\cdots\Numeral{2900760},\Char{\char34 Final~anapaests~of~the~Chorus\char34}){}\<[E]%
\\
\>[16]{}\mskip1.5mu]{}\<[16E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{15}{@{}>{\hspre}c<{\hspost}@{}}%
\column{15E}{@{}l@{}}%
\column{18}{@{}>{\hspre}l<{\hspost}@{}}%
\column{39}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{speeches}\ConSym{::}[\mskip1.5mu (\mathsf{Section},\mathsf{Section},\mathsf{String})\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\Varid{speeches}\mathrel{=}{}\<[15]%
\>[15]{}[\mskip1.5mu {}\<[15E]%
\>[18]{}(\Numeral{162}\cdots\Numeral{210},{}\<[39]%
\>[39]{}\Numeral{2900146}\cdots\Numeral{2900157},\Char{\char34 \char92 \char92 emph\char123 Kreon:~\char92 \char92 textgreek\char123 ἄνδρες,~τὰ~μὲν~δὴ...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{249}\cdots\Numeral{277},{}\<[39]%
\>[39]{}\Numeral{2900191}\cdots\Numeral{2900204},\Char{\char34 \char92 \char92 emph\char123 Guard:~\char92 \char92 textgreek\char123 οὐκ~οἶδ'·~ἐκ\char92 \char92 hlig\char123 εῖ\char125 ~γὰρ~οὔτε...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{280}\cdots\Numeral{314},{}\<[39]%
\>[39]{}\Numeral{2900206}\cdots\Numeral{2900220},\Char{\char34 \char92 \char92 emph\char123 Kreon:~\char92 \char92 textgreek\char123 παῦσαι,~πρὶν~ὀργῆς...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{407}\cdots\Numeral{440},{}\<[39]%
\>[39]{}\Numeral{2900271}\cdots\Numeral{2900282},\Char{\char34 \char92 \char92 emph\char123 Guard:~\char92 \char92 textgreek\char123 τοιοῦτον~ἦν~τὸ~πρᾶγμ'...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{450}\cdots\Numeral{470},{}\<[39]%
\>[39]{}\Numeral{2900291}\cdots\Numeral{2900302},\Char{\char34 \char92 \char92 emph\char123 Antigone:~\char92 \char92 textgreek\char123 οὐ~γάρ~τί~μοι~Ζεὺς...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{473}\cdots\Numeral{495},{}\<[39]%
\>[39]{}\Numeral{2900305}\cdots\Numeral{2900316},\Char{\char34 \char92 \char92 emph\char123 Kreon:~\char92 \char92 textgreek\char123 ἀ\char92 \char92 hlig\char123 λλ\char125 '~ἴσ\char92 \char92 salt\char123 θ\char125 ι~τοι...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{639}\cdots\Numeral{680},{}\<[39]%
\>[39]{}\Numeral{2900410}\cdots\Numeral{2900427},\Char{\char34 \char92 \char92 emph\char123 Kreon:~\char92 \char92 textgreek\char123 οὕτω~γὰρ,~ὦ~παῖ...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{683}\cdots\Numeral{723},{}\<[39]%
\>[39]{}\Numeral{2900429}\cdots\Numeral{2900446},\Char{\char34 \char92 \char92 emph\char123 Haimon:~\char92 \char92 textgreek\char123 πἀτερ,~\char92 \char92 salt\char123 θ\char125 εοὶ~φύουσιν...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{891}\cdots\Numeral{928},{}\<[39]%
\>[39]{}\Numeral{2900531}\cdots\Numeral{2900547},\Char{\char34 \char92 \char92 emph\char123 Antigone:~\char92 \char92 textgreek\char123 ὦ~τύμβος,~ὦ~νυμφ\char92 \char92 hlig\char123 εῖ\char125 ον...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{998}\cdots\Numeral{1032},{}\<[39]%
\>[39]{}\Numeral{2900577}\cdots\Numeral{2900595},\Char{\char34 \char92 \char92 emph\char123 Teiresias:~\char92 \char92 textgreek\char123 γνώσῃ,~τέχνης~σημ\char92 \char92 hlig\char123 εῖ\char125 α...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{1033}\cdots\Numeral{1047},{}\<[39]%
\>[39]{}\Numeral{2900596}\cdots\Numeral{2900601},\Char{\char34 \char92 \char92 emph\char123 Kreon:~\char92 \char92 textgreek\char123 ὦ~πρέσβυ,~πάντες...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{1064}\cdots\Numeral{1090},{}\<[39]%
\>[39]{}\Numeral{2900621}\cdots\Numeral{2900628},\Char{\char34 \char92 \char92 emph\char123 Teiresias:~\char92 \char92 textgreek\char123 ἀ\char92 \char92 hlig\char123 λλ'\char125 ~εὖ~γέ~τοι...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{1155}\cdots\Numeral{1172},{}\<[39]%
\>[39]{}\Numeral{2900655}\cdots\Numeral{2900662},\Char{\char34 \char92 \char92 emph\char123 Messenger:~\char92 \char92 textgreek\char123 Κάδμου~πάροικοι~καὶ...\char125 \char125 \char34}),{}\<[E]%
\\
\>[18]{}(\Numeral{1192}\cdots\Numeral{1243},{}\<[39]%
\>[39]{}\Numeral{2900681}\cdots\Numeral{2900703},\Char{\char34 \char92 \char92 emph\char123 Messenger:~\char92 \char92 textgreek\char123 ἐγώ,~φίλη~δέσποινα...\char125 \char125 \char34})\mskip1.5mu]{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{14}{@{}>{\hspre}c<{\hspost}@{}}%
\column{14E}{@{}l@{}}%
\column{17}{@{}>{\hspre}l<{\hspost}@{}}%
\column{38}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\Varid{stichos}\ConSym{::}[\mskip1.5mu (\mathsf{Section},\mathsf{Section},\mathsf{String})\mskip1.5mu]{}\<[E]%
\\
\>[3]{}\Varid{stichos}\mathrel{=}{}\<[14]%
\>[14]{}[\mskip1.5mu {}\<[14E]%
\>[17]{}(\Numeral{536}\cdots\Numeral{576},{}\<[38]%
\>[38]{}\Numeral{2900348}\cdots\Numeral{2900385},\Char{\char34 Ismene,~Antigone~and~Kreon\char34}),{}\<[E]%
\\
\>[17]{}(\Numeral{728}\cdots\Numeral{757},{}\<[38]%
\>[38]{}\Numeral{2900450}\cdots\Numeral{2900480},\Char{\char34 Haimon~and~Kreon\char34}),{}\<[E]%
\\
\>[17]{}(\Numeral{991}\cdots\Numeral{997},{}\<[38]%
\>[38]{}\Numeral{2900569}\cdots\Numeral{2900576},\Char{\char34 Kreon~and~Teiresias\char34}),{}\<[E]%
\\
\>[17]{}(\Numeral{1047}\cdots\Numeral{1063},{}\<[38]%
\>[38]{}\Numeral{2900602}\cdots\Numeral{2900620},\Char{\char34 Kreon~and~Teiresias\char34}),{}\<[E]%
\\
\>[17]{}(\Numeral{1172}\cdots\Numeral{1179},{}\<[38]%
\>[38]{}\Numeral{2900663}\cdots\Numeral{2900674},\Char{\char34 Chorus~and~Messenger\char34}){}\<[E]%
\\
\>[14]{}\mskip1.5mu]{}\<[14E]%
\ColumnHook
\end{hscode}\resethooks
}


\ignore{
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{simpleName}\ConSym{::}\mathsf{String}\to \mathsf{QName}{}\<[E]%
\\
\>[3]{}\FN{simpleName}\;\Varid{s}\mathrel{=}\mathsf{QName}\;\Varid{s}\;\mathsf{Nothing}\;\mathsf{Nothing}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{readAttr}\ConSym{::}\mathsf{Read}\;\VarSym{\alpha}\Rightarrow \mathsf{String}\to \mathsf{Element}\to \mathsf{Maybe}\;\VarSym{\alpha}{}\<[E]%
\\
\>[3]{}\FN{readAttr}\;\Varid{n}\mathrel{=}\FN{fmap}\;\FN{read}\circ\FN{findAttr}\;(\FN{simpleName}\;\Varid{n}){}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{11}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{mean}\ConSym{::}\mathsf{Fractional}\;\Varid{n}\Rightarrow [\mskip1.5mu \Varid{n}\mskip1.5mu]\to \Varid{n}{}\<[E]%
\\
\>[3]{}\FN{mean}\mathrel{=}{}\<[11]%
\>[11]{}\llbracket\;\FN{sum}\;\mathbin{/}\;\FN{length}\;\rrbracket{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\FN{sdev}\ConSym{::}\mathsf{Floating}\;\Varid{n}\Rightarrow [\mskip1.5mu \Varid{n}\mskip1.5mu]\to \Varid{n}{}\<[E]%
\\
\>[3]{}\FN{sdev}\;\Varid{xs}\mathrel{=}\sqrt{\dfrac{\FN{sum}\;\llbracket\;(\lambda \Varid{x}\to {\Varid{x}}^{\Numeral{2}})\;\llbracket\;(\VarSym{-}(\FN{mean}\;\Varid{xs})\VarSym{+})\;\Varid{xs}\;\rrbracket\;\rrbracket}{\FN{length}\;\Varid{xs}\VarSym{-}\Numeral{1}}}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}\llbracket\;\cdot \;\cdot \;\cdot \;\rrbracket\mathrel{=}\llbracket\;\cdot \;\cdot \;\cdot \;\rrbracket{}\<[E]%
\\
\>[3]{}\dfrac{\cdot }{\cdot }\mathrel{=}(\mathbin{\%}){}\<[E]%
\\
\>[3]{}\dfrac{\cdot }{\cdot }\mathrel{=}(\mathbin{/}){}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{3}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[3]{}{\Varid{x}}^{\Varid{n}}\mathrel{=}\Varid{x} \Varid{n}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
}

\end{appendices}


\end{document}


